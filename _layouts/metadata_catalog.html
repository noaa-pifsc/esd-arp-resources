---
layout: splash
title: "Metadata Catalog"
---

<h1>Browse Available Data</h1>

<!-- Filter Inputs -->
<div>
    <label for="keyword-filter">Filter Results:</label>
    <input type="text" id="keyword-filter" oninput="filterByKeywords()" placeholder="Enter keyword(s) here">
</div>

<!-- Table to display publications -->
<table id="metadata-table">
    <thead>
        <tr>
            <th>Title</th>
            <th>CatID</th>
            <th>Link_</th>
            <th>Theme</th>
        </tr>
    </thead>
    <tbody>
        <!-- Data will be inserted here by JavaScript -->
    </tbody>
</table>

<!-- JavaScript to load and display CSV data -->
<script>
    let inportData = [];

    function loadMetadata() {
        fetch('/assets/json/crep_inport.json')
            .then(response => response.json())
            .then(data => {
                if (data.items && Array.isArray(data.items)) {
                    inportData = data.items;  // Correctly access the items array
                    console.log("Loaded JSON Data:", inportData); // Debugging
                    renderTable(inportData);
                } else {
                    console.error("Error: 'items' is not an array or missing in the JSON data.");
                }
            })
            .catch(error => console.error("Error loading JSON:", error));
    }

    function filterByKeywords() {
    const query = document.getElementById("keyword-filter").value.toLowerCase().trim();
    const keywords = query.split(/\s+/); // Split into keywords

    const filteredData = query
        ? inportData.filter(met => {
            // Check for matches in title and theme only
            const matches = keywords.every(keyword => {
                const titleMatch = met.title && met.title.toLowerCase().includes(keyword);
                const themeMatch = met.theme && met.theme.toLowerCase().includes(keyword);
                
                return titleMatch || themeMatch;
            });

            return matches; // Only keep items where all keywords match
        })
        : inportData;

    renderTable(filteredData); // Render filtered table
    }

    function renderTable(data) {
        const tableBody = document.querySelector("#metadata-table tbody");
        tableBody.innerHTML = "";  // Clear existing table rows

        if (data.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="4">No results found.</td></tr>`;
            return;
        }

        data.forEach(met => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${met.title || "N/A"}</td>
                <td>${met.catid || "N/A"}</td>
                <td>${met.link_ ? `<a href="${met.link_}" target="_blank">Link</a>` : "N/A"}</td>
                <td>${met.theme || "N/A"}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    window.onload = loadMetadata;
</script>
